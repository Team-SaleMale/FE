:root{
  --panel-grad: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.95));
  --bg-soft:#0b0f20;
  --white:#fff;
  --brand:#405FF2;
  --shadow-sm:0 6px 16px rgba(5,11,32,.08);
  --shadow-md:0 10px 28px rgba(5,11,32,.10), 0 22px 44px rgba(5,11,32,.14);
  --r-xl:24px;

  /* Lightbox layout vars */
  --lb-vpad:48px;         /* 상하 패딩 */
  --lb-hpad:72px;         /* 좌우 패딩 */
  --lb-gap:16px;          /* 이미지-썸네일 사이 간격 */
  --lb-thumb-h:96px;      /* 썸네일 높이 */
}

/* 카드 */
.gallery{
  background:var(--panel-grad);
  border-radius:var(--r-xl);
  box-shadow:var(--shadow-md);
  padding:18px;
  border:1px solid rgba(12,16,34,.06);
  backdrop-filter:saturate(1.2) blur(2px);
}

/* 메인 프리뷰 */
.mainShot{
  position:relative;
  overflow:hidden;
  border-radius:18px;
  box-shadow:var(--shadow-md);
  background:var(--bg-soft);
  /* 높이 살짝 더 키운 버전 */
  height:clamp(460px, 64vh, 720px);
  display:flex; align-items:center; justify-content:center;
  cursor:zoom-in;
}
.mainMedia{
  width:100%; height:100%;
  object-fit:cover; object-position:center;
  user-select:none; -webkit-user-drag:none;
  background:var(--bg-soft);
}
.mainOverlay{
  position:absolute; inset:0; pointer-events:none;
  background:linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,0) 35%);
}
.badge{
  position:absolute; right:12px; bottom:12px;
  font-size:12px; color:var(--white);
  background:rgba(0,0,0,.45); padding:4px 8px; border-radius:999px;
}

/* 본문 썸네일 */
.thumbRow{
  margin:14px 0 0; padding:0; list-style:none;
  display:grid; grid-template-columns:repeat(6, minmax(0,1fr)); gap:10px;
}
.thumb{
  width:100%; aspect-ratio:1.4/1;
  border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,.6);
  background:var(--panel-grad); box-shadow:var(--shadow-sm);
  cursor:pointer; padding:0; display:grid; place-items:center;
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
.thumb:hover{ transform:translateY(-2px); box-shadow:var(--shadow-md); }
.active{ outline:2.5px solid rgba(64,95,242,.45); outline-offset:0; }
.videoThumb{
  width:100%; height:100%; display:grid; place-items:center;
  background:linear-gradient(180deg,#E9ECF4 0%,#DDE2EE 100%);
}

/* ================= 라이트박스(Portal) ================= */
@keyframes lbFade{ from{opacity:0} to{opacity:1} }

.lbBackdrop{
  position:fixed; inset:0;
  background:rgba(0,0,0,.92);
  z-index:99999;
  display:flex; align-items:center; justify-content:center;
  animation:lbFade .15s ease-out;
}

/* 스테이지를 2행 그리드(이미지 1fr, 썸네일 auto)로 구성 */
.lbStage{
  position:relative;
  width:100%; height:100%;
  display:grid;
  grid-template-rows: 1fr auto;
  align-items:center; justify-items:center;
  padding:var(--lb-vpad) var(--lb-hpad);
  row-gap:var(--lb-gap);
  box-sizing:border-box;
}

/* 이미지: 그리드 1행을 꽉 채움 + 썸네일 영역을 제외한 뷰포트 내에서 최대화 */
.lbMedia{
  max-width: min(1680px, calc(100vw - (2 * var(--lb-hpad))));
  max-height: calc(100vh - (2 * var(--lb-vpad)) - var(--lb-thumb-h) - var(--lb-gap));
  width:auto; height:auto;
  object-fit:contain; background:#000; border-radius:12px;
  box-shadow:0 20px 60px rgba(0,0,0,.4);
  justify-self:center; align-self:center;
}

/* 원형 화살표(세로 중앙 고정) */
.lbArrow{
  position:absolute; top:50%; transform:translateY(-50%);
  width:56px; height:56px; border-radius:999px;
  background:#fff; color:#111; border:1px solid rgba(0,0,0,.25);
  box-shadow:0 6px 18px rgba(0,0,0,.25);
  font-size:30px; line-height:54px; text-align:center;
  cursor:pointer; user-select:none;
}
.lbArrow:hover{ background:#f7f7f7; }
.left{ left:60px; }
.right{ right:60px; }

/* 닫기/카운터 */
.lbClose{
  position:absolute; top:28px; right:28px;
  padding:8px 14px; border-radius:10px;
  border:1px solid rgba(255,255,255,.25);
  background:rgba(255,255,255,.12); color:#fff;
  font-size:14px; cursor:pointer; backdrop-filter:blur(6px);
}
.lbClose:hover{ background:rgba(255,255,255,.18); }

/* 카운터는 이미지 영역 안쪽 우하단에 고정(썸네일 영역을 피해 계산) */
.lbCounter{
  position:absolute;
  right:28px;
  bottom: calc(var(--lb-thumb-h) + var(--lb-gap) + 24px);
  font-size:12px; color:#fff; background:rgba(0,0,0,.55);
  padding:6px 10px; border-radius:999px;
}

/* 하단 썸네일 스트립: 이제 '정상 흐름'(static)으로 배치되어 겹치지 않음 */
.lbThumbs{
  width:100%;
  height:var(--lb-thumb-h);
  display:flex; gap:10px; padding:10px;
  background:rgba(0,0,0,.35); border-radius:12px;
  overflow:auto hidden;
  align-items:center;
}
.lbThumb{
  width:128px; height:calc(var(--lb-thumb-h) - 20px);
  border-radius:10px; overflow:hidden;
  border:1px solid rgba(255,255,255,.25); background:#111; padding:0; cursor:pointer;
  flex:0 0 auto;
}
.lbThumb img{ width:100%; height:100%; object-fit:cover; display:block; }
.lbThumb.active{ outline:2px solid rgba(255,255,255,.9); outline-offset:0; }
.videoPill{ display:inline-block; color:#fff; font-size:12px; padding:6px 10px; }

/* 대화면 보정 */
@media (min-width:1600px){
  .lbMedia{ max-width: min(1800px, calc(100vw - (2 * var(--lb-hpad)))); }
}

/* 반응형 */
@media (max-width:1080px){
  /* 태블릿 구간도 살짝 더 크게 */
  .mainShot{ height:clamp(400px, 58vh, 620px); }
  .left{ left:32px; } .right{ right:32px; }
  :root{ --lb-hpad:56px; }
}
@media (max-width:640px){
  /* 모바일에서도 약간 더 크게 */
  .mainShot{ height:440px; }
  .thumbRow{ grid-template-columns:repeat(4, minmax(0,1fr)); }
  :root{ --lb-vpad:36px; --lb-hpad:44px; --lb-thumb-h:72px; }
  .left{ left:22px; } .right{ right:22px; }
}
